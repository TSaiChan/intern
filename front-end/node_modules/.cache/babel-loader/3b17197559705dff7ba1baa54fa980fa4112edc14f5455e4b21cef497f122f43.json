{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thumm\\\\OneDrive\\\\Desktop\\\\digi-goat\\\\front-end\\\\src\\\\components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport './css/login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [showPassword, setShowPassword] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const isValidEmail = email => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!isValidEmail(email)) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Invalid Email',\n        text: 'Please enter a valid email address.',\n        confirmButtonColor: '#3085d6'\n      });\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:3000/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(text || 'An unknown error occurred during login.');\n      }\n      const data = await response.json();\n      if (data.verified !== 1) {\n        return Swal.fire({\n          icon: 'warning',\n          title: 'Email Not Verified',\n          text: 'Please verify your email before logging in.',\n          confirmButtonColor: '#3085d6'\n        });\n      }\n      if (data.active !== 1) {\n        return Swal.fire({\n          icon: 'error',\n          title: 'Account Inactive',\n          text: 'Your account is inactive. Please contact support.',\n          confirmButtonColor: '#3085d6'\n        });\n      }\n      localStorage.setItem('token', data.token);\n      Swal.fire({\n        icon: 'success',\n        title: `Welcome, ${data.username}!`,\n        text: 'You have successfully logged in.',\n        confirmButtonColor: '#3085d6'\n      }).then(() => {\n        const groupId = Number(data.group_id);\n        if (groupId === 0) {\n          navigate('/admin-dashboard');\n        } else if (groupId === 1) {\n          navigate('/customer-dashboard');\n        } else {\n          navigate('/');\n        }\n      });\n    } catch (err) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Login Failed',\n        text: err.message,\n        confirmButtonColor: '#3085d6'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex font-poppins items-center justify-center min-h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-md p-5 space-y-5 bg-white rounded-2xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-bold text-center text-gray-800\",\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"block text-md text-gray-700 mb-2\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"email\",\n            type: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            required: true,\n            placeholder: \"you@example.com\",\n            className: \"input-group input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"block text-md text-gray-700 mb-2\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"password\",\n            type: showPassword ? 'text' : 'password',\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n            className: \"input-group input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"absolute top-11 right-4 text-gray-500 cursor-pointer\",\n            onClick: () => setShowPassword(!showPassword),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: `fas ${showPassword ? 'fa-eye-slash' : 'fa-eye'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"login-button\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"toggle-container\",\n        children: [\"Don\\u2019t have an account?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          className: \"toggle-text\",\n          children: \"Register here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"moduoboEAfhwcivp1hnqHXXZPBI=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Link","useNavigate","Swal","jsxDEV","_jsxDEV","Login","_s","showPassword","setShowPassword","email","setEmail","password","setPassword","navigate","isValidEmail","test","handleSubmit","e","preventDefault","fire","icon","title","text","confirmButtonColor","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","verified","active","localStorage","setItem","token","username","then","groupId","Number","group_id","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","type","value","onChange","target","required","placeholder","onClick","to","_c","$RefreshReg$"],"sources":["C:/Users/thumm/OneDrive/Desktop/digi-goat/front-end/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\nimport './css/login.css';\r\n\r\nfunction Login() {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!isValidEmail(email)) {\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Invalid Email',\r\n        text: 'Please enter a valid email address.',\r\n        confirmButtonColor: '#3085d6',\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3000/api/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const text = await response.text();\r\n        throw new Error(text || 'An unknown error occurred during login.');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.verified !== 1) {\r\n        return Swal.fire({\r\n          icon: 'warning',\r\n          title: 'Email Not Verified',\r\n          text: 'Please verify your email before logging in.',\r\n          confirmButtonColor: '#3085d6',\r\n        });\r\n      }\r\n\r\n      if (data.active !== 1) {\r\n        return Swal.fire({\r\n          icon: 'error',\r\n          title: 'Account Inactive',\r\n          text: 'Your account is inactive. Please contact support.',\r\n          confirmButtonColor: '#3085d6',\r\n        });\r\n      }\r\n\r\n      localStorage.setItem('token', data.token);\r\n\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: `Welcome, ${data.username}!`,\r\n        text: 'You have successfully logged in.',\r\n        confirmButtonColor: '#3085d6',\r\n      }).then(() => {\r\n        const groupId = Number(data.group_id);\r\n        if (groupId === 0) {\r\n          navigate('/admin-dashboard');\r\n        } else if (groupId === 1) {\r\n          navigate('/customer-dashboard');\r\n        } else {\r\n          navigate('/');\r\n        }\r\n      });\r\n    } catch (err) {\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Login Failed',\r\n        text: err.message,\r\n        confirmButtonColor: '#3085d6',\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex font-poppins items-center justify-center min-h-screen\">\r\n      <div className=\"w-full max-w-md p-5 space-y-5 bg-white rounded-2xl\">\r\n        <h1 className=\"text-4xl font-bold text-center text-gray-800\">Log In</h1>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"input-group\">\r\n            <label htmlFor=\"email\" className=\"block text-md text-gray-700 mb-2\">Email</label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              placeholder=\"you@example.com\"\r\n              className=\"input-group input\"\r\n            />\r\n          </div>\r\n          <div className=\"relative input-group\">\r\n            <label htmlFor=\"password\" className=\"block text-md text-gray-700 mb-2\">Password</label>\r\n            <input\r\n              id=\"password\"\r\n              type={showPassword ? 'text' : 'password'}\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              placeholder=\"••••••••\"\r\n              className=\"input-group input\"\r\n            />\r\n            <span\r\n              className=\"absolute top-11 right-4 text-gray-500 cursor-pointer\"\r\n              onClick={() => setShowPassword(!showPassword)}\r\n            >\r\n              <i className={`fas ${showPassword ? 'fa-eye-slash' : 'fa-eye'}`}></i>\r\n            </span>\r\n          </div>\r\n          <button type=\"submit\" className=\"login-button\">Log In</button>\r\n        </form>\r\n        <p className=\"toggle-container\">\r\n          Don’t have an account?{' '}\r\n          <Link to=\"/register\" className=\"toggle-text\">Register here</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}