{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thumm\\\\OneDrive\\\\Desktop\\\\digi-goat\\\\front-end\\\\src\\\\components\\\\SellGoat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { jwtDecode } from 'jwt-decode';\nimport './css/login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SellGoat() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    state\n  } = useLocation();\n  const isEditing = !!(state !== null && state !== void 0 && state.goat);\n  const [formData, setFormData] = useState({\n    goat_number: isEditing ? state.goat.goat_number : '',\n    breed: isEditing ? state.goat.breed : '',\n    dob: isEditing ? state.goat.dob.split('T')[0] : '',\n    weight: isEditing ? state.goat.weight : '',\n    health_status: isEditing ? state.goat.health_status : '',\n    minimum_price: isEditing ? state.goat.minimum_price : '',\n    maximum_price: isEditing ? state.goat.maximum_price : '',\n    price: isEditing ? state.goat.price || '' : '',\n    is_active: isEditing ? state.goat.is_active : true,\n    image: null\n  });\n  const [imagePreview, setImagePreview] = useState(isEditing && state.goat.image_url ? `http://localhost:3000${state.goat.image_url}` : null);\n  const [verified, setVerified] = useState(false);\n  const [canSell, setCanSell] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Unauthorized',\n        text: 'Please log in to access this page.',\n        confirmButtonColor: '#3085d6'\n      }).then(() => navigate('/'));\n      return;\n    }\n    try {\n      const decodedToken = jwtDecode(token);\n      console.log('User ID from token:', decodedToken.userId);\n    } catch (err) {\n      console.error('Error decoding token:', err);\n    }\n    fetch('http://localhost:3000/api/customer/profile', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(async res => {\n      if (!res.ok) {\n        throw new Error('Failed to fetch profile');\n      }\n      return res.json();\n    }).then(data => {\n      console.log('Profile API response in SellGoat:', data);\n      console.log('Type of verified:', typeof data.verified, 'Value:', data.verified);\n      console.log('Type of can_sell:', typeof data.can_sell, 'Value:', data.can_sell);\n      const isVerified = Boolean(Number(data.verified));\n      const canSellPermission = Boolean(Number(data.can_sell));\n      if (isVerified && canSellPermission) {\n        setVerified(true);\n        setCanSell(true);\n      } else if (!isVerified) {\n        setMessage('You must complete KYC before listing goats for sale.');\n      } else if (!canSellPermission) {\n        setMessage('You need permission to sell goats. Update your profile to enable selling.');\n      }\n      setLoading(false);\n    }).catch(err => {\n      console.error('Error fetching profile:', err);\n      setMessage('Failed to verify customer info.');\n      setLoading(false);\n    });\n  }, [navigate]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked,\n      files\n    } = e.target;\n    if (type === 'file') {\n      const file = files[0];\n      setFormData(prev => ({\n        ...prev,\n        image: file\n      }));\n      if (file) {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          setImagePreview(reader.result);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        setImagePreview(null);\n      }\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : value\n      }));\n    }\n    setMessage('');\n  };\n  const validateForm = () => {\n    const {\n      goat_number,\n      breed,\n      dob,\n      weight,\n      health_status,\n      minimum_price,\n      maximum_price,\n      price,\n      image\n    } = formData;\n    if (!goat_number.trim() || !breed.trim() || !dob || !weight || !health_status.trim() || !minimum_price || !maximum_price || !image && !isEditing) {\n      setMessage('All required fields must be filled.');\n      return false;\n    }\n    if (new Date(dob) > new Date()) {\n      setMessage('Date of birth cannot be in the future.');\n      return false;\n    }\n    if (parseFloat(weight) <= 0) {\n      setMessage('Weight must be greater than 0.');\n      return false;\n    }\n    if (parseFloat(minimum_price) <= 0 || parseFloat(maximum_price) <= 0) {\n      setMessage('Prices must be greater than 0.');\n      return false;\n    }\n    if (parseFloat(minimum_price) > parseFloat(maximum_price)) {\n      setMessage('Minimum price cannot exceed maximum price.');\n      return false;\n    }\n    if (price && price.trim() !== '' && parseFloat(price) <= 0) {\n      setMessage('Fixed price must be greater than 0 if provided.');\n      return false;\n    }\n    return true;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    setSubmitting(true);\n    const token = localStorage.getItem('token');\n    const formDataToSend = new FormData();\n    for (const key in formData) {\n      if (key === 'image' && formData[key]) {\n        formDataToSend.append('image', formData[key]);\n      } else if (formData[key] !== '') {\n        formDataToSend.append(key, formData[key]);\n      }\n    }\n    try {\n      const url = isEditing ? `http://localhost:3000/api/customer/goats/${state.goat.id}` : 'http://localhost:3000/api/customer/goats';\n      const method = isEditing ? 'PUT' : 'POST';\n      const res = await fetch(url, {\n        method,\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formDataToSend\n      });\n      const data = await res.json();\n      if (res.ok) {\n        Swal.fire({\n          icon: 'success',\n          title: isEditing ? 'Goat Updated' : 'Goat Registered',\n          text: isEditing ? 'The goat listing has been updated.' : 'Your goat has been successfully listed for sale.',\n          confirmButtonColor: '#3085d6'\n        }).then(() => navigate('/my-goats'));\n      } else {\n        setMessage(data.message || 'Failed to register goat. Ensure goat number is unique.');\n      }\n    } catch (err) {\n      setMessage('Network error: ' + err.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center p-10 text-gray-600\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 25\n  }, this);\n  if (!verified) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-10 text-red-500\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 16\n    }, this);\n  }\n  if (!canSell) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-10 text-yellow-500\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-cover bg-center p-6 font-sans\",\n    style: {\n      backgroundImage: `url('/images/index.jpg')`\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto bg-white bg-opacity-95 rounded-xl shadow-lg p-6 backdrop-blur-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-center text-gray-800 mb-6 drop-shadow-md\",\n        children: isEditing ? 'Edit Goat Listing' : 'Register a Goat for Sale'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"goat_number\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Goat Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"goat_number\",\n            name: \"goat_number\",\n            type: \"text\",\n            value: formData.goat_number,\n            onChange: handleChange,\n            placeholder: \"Unique goat identifier\",\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"breed\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Breed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"breed\",\n            name: \"breed\",\n            type: \"text\",\n            value: formData.breed,\n            onChange: handleChange,\n            placeholder: \"Goat breed\",\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"dob\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Date of Birth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"dob\",\n            name: \"dob\",\n            type: \"date\",\n            value: formData.dob,\n            onChange: handleChange,\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"weight\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Weight (kg)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"weight\",\n            name: \"weight\",\n            type: \"number\",\n            step: \"0.1\",\n            value: formData.weight,\n            onChange: handleChange,\n            placeholder: \"Weight in kilograms\",\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"health_status\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Health Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"health_status\",\n            name: \"health_status\",\n            type: \"text\",\n            value: formData.health_status,\n            onChange: handleChange,\n            placeholder: \"General health information\",\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"minimum_price\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: [\"Minimum Price\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 text-gray-500 text-xs\",\n              children: \"(e.g., $50-$100, based on breed and weight)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"minimum_price\",\n            name: \"minimum_price\",\n            type: \"number\",\n            step: \"0.01\",\n            value: formData.minimum_price,\n            onChange: handleChange,\n            placeholder: \"Minimum bid or price\",\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"maximum_price\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: [\"Maximum Price\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 text-gray-500 text-xs\",\n              children: \"(e.g., $150-$300, based on market value)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"maximum_price\",\n            name: \"maximum_price\",\n            type: \"number\",\n            step: \"0.01\",\n            value: formData.maximum_price,\n            onChange: handleChange,\n            placeholder: \"Maximum expected price\",\n            required: true,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"price\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Fixed Price (Optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"price\",\n            name: \"price\",\n            type: \"number\",\n            step: \"0.01\",\n            value: formData.price,\n            onChange: handleChange,\n            placeholder: \"Fixed sale price\",\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center text-sm font-medium text-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"is_active\",\n              type: \"checkbox\",\n              checked: formData.is_active,\n              onChange: handleChange,\n              className: \"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 29\n            }, this), \"Active Listing\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"image\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Upload Goat Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"image\",\n            name: \"image\",\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleChange,\n            required: !isEditing,\n            className: \"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 25\n          }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Image Preview:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: imagePreview,\n              alt: \"Goat Preview\",\n              className: \"mt-2 max-w-full h-auto rounded-md shadow-md\",\n              style: {\n                maxHeight: '200px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 21\n        }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"col-span-2 text-red-500 text-sm\",\n          role: \"alert\",\n          \"aria-live\": \"assertive\",\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: submitting,\n          className: `col-span-2 py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition ${submitting ? 'opacity-50 cursor-not-allowed' : ''}`,\n          children: submitting ? 'Submitting...' : isEditing ? 'Update Goat' : 'Register Goat'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 9\n  }, this);\n}\n_s(SellGoat, \"ZYyvvGxyzZsiVlQ72Z9/j68Q6jg=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = SellGoat;\nexport default SellGoat;\nvar _c;\n$RefreshReg$(_c, \"SellGoat\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","Swal","jwtDecode","jsxDEV","_jsxDEV","SellGoat","_s","navigate","state","isEditing","goat","formData","setFormData","goat_number","breed","dob","split","weight","health_status","minimum_price","maximum_price","price","is_active","image","imagePreview","setImagePreview","image_url","verified","setVerified","canSell","setCanSell","loading","setLoading","submitting","setSubmitting","message","setMessage","token","localStorage","getItem","fire","icon","title","text","confirmButtonColor","then","decodedToken","console","log","userId","err","error","fetch","headers","Authorization","res","ok","Error","json","data","can_sell","isVerified","Boolean","Number","canSellPermission","catch","handleChange","e","name","value","type","checked","files","target","file","prev","reader","FileReader","onloadend","result","readAsDataURL","validateForm","trim","Date","parseFloat","handleSubmit","preventDefault","formDataToSend","FormData","key","append","url","id","method","body","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundImage","onSubmit","noValidate","htmlFor","onChange","placeholder","required","step","accept","src","alt","maxHeight","role","disabled","_c","$RefreshReg$"],"sources":["C:/Users/thumm/OneDrive/Desktop/digi-goat/front-end/src/components/SellGoat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport './css/login.css';\r\n\r\nfunction SellGoat() {\r\n    const navigate = useNavigate();\r\n    const { state } = useLocation();\r\n    const isEditing = !!state?.goat;\r\n    const [formData, setFormData] = useState({\r\n        goat_number: isEditing ? state.goat.goat_number : '',\r\n        breed: isEditing ? state.goat.breed : '',\r\n        dob: isEditing ? state.goat.dob.split('T')[0] : '',\r\n        weight: isEditing ? state.goat.weight : '',\r\n        health_status: isEditing ? state.goat.health_status : '',\r\n        minimum_price: isEditing ? state.goat.minimum_price : '',\r\n        maximum_price: isEditing ? state.goat.maximum_price : '',\r\n        price: isEditing ? state.goat.price || '' : '',\r\n        is_active: isEditing ? state.goat.is_active : true,\r\n        image: null,\r\n    });\r\n    const [imagePreview, setImagePreview] = useState(isEditing && state.goat.image_url ? `http://localhost:3000${state.goat.image_url}` : null);\r\n\r\n    const [verified, setVerified] = useState(false);\r\n    const [canSell, setCanSell] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Unauthorized',\r\n                text: 'Please log in to access this page.',\r\n                confirmButtonColor: '#3085d6',\r\n            }).then(() => navigate('/'));\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const decodedToken = jwtDecode(token);\r\n            console.log('User ID from token:', decodedToken.userId);\r\n        } catch (err) {\r\n            console.error('Error decoding token:', err);\r\n        }\r\n\r\n        fetch('http://localhost:3000/api/customer/profile', {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n            .then(async (res) => {\r\n                if (!res.ok) {\r\n                    throw new Error('Failed to fetch profile');\r\n                }\r\n                return res.json();\r\n            })\r\n            .then((data) => {\r\n                console.log('Profile API response in SellGoat:', data);\r\n                console.log('Type of verified:', typeof data.verified, 'Value:', data.verified);\r\n                console.log('Type of can_sell:', typeof data.can_sell, 'Value:', data.can_sell);\r\n\r\n                const isVerified = Boolean(Number(data.verified));\r\n                const canSellPermission = Boolean(Number(data.can_sell));\r\n\r\n                if (isVerified && canSellPermission) {\r\n                    setVerified(true);\r\n                    setCanSell(true);\r\n                } else if (!isVerified) {\r\n                    setMessage('You must complete KYC before listing goats for sale.');\r\n                } else if (!canSellPermission) {\r\n                    setMessage('You need permission to sell goats. Update your profile to enable selling.');\r\n                }\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                console.error('Error fetching profile:', err);\r\n                setMessage('Failed to verify customer info.');\r\n                setLoading(false);\r\n            });\r\n    }, [navigate]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked, files } = e.target;\r\n        if (type === 'file') {\r\n            const file = files[0];\r\n            setFormData((prev) => ({ ...prev, image: file }));\r\n            if (file) {\r\n                const reader = new FileReader();\r\n                reader.onloadend = () => {\r\n                    setImagePreview(reader.result);\r\n                };\r\n                reader.readAsDataURL(file);\r\n            } else {\r\n                setImagePreview(null);\r\n            }\r\n        } else {\r\n            setFormData((prev) => ({\r\n                ...prev,\r\n                [name]: type === 'checkbox' ? checked : value,\r\n            }));\r\n        }\r\n        setMessage('');\r\n    };\r\n\r\n    const validateForm = () => {\r\n        const {\r\n            goat_number,\r\n            breed,\r\n            dob,\r\n            weight,\r\n            health_status,\r\n            minimum_price,\r\n            maximum_price,\r\n            price,\r\n            image,\r\n        } = formData;\r\n\r\n        if (\r\n            !goat_number.trim() ||\r\n            !breed.trim() ||\r\n            !dob ||\r\n            !weight ||\r\n            !health_status.trim() ||\r\n            !minimum_price ||\r\n            !maximum_price ||\r\n            (!image && !isEditing)\r\n        ) {\r\n            setMessage('All required fields must be filled.');\r\n            return false;\r\n        }\r\n        if (new Date(dob) > new Date()) {\r\n            setMessage('Date of birth cannot be in the future.');\r\n            return false;\r\n        }\r\n        if (parseFloat(weight) <= 0) {\r\n            setMessage('Weight must be greater than 0.');\r\n            return false;\r\n        }\r\n        if (parseFloat(minimum_price) <= 0 || parseFloat(maximum_price) <= 0) {\r\n            setMessage('Prices must be greater than 0.');\r\n            return false;\r\n        }\r\n        if (parseFloat(minimum_price) > parseFloat(maximum_price)) {\r\n            setMessage('Minimum price cannot exceed maximum price.');\r\n            return false;\r\n        }\r\n        if (price && price.trim() !== '' && parseFloat(price) <= 0) {\r\n            setMessage('Fixed price must be greater than 0 if provided.');\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!validateForm()) return;\r\n\r\n        setSubmitting(true);\r\n        const token = localStorage.getItem('token');\r\n        const formDataToSend = new FormData();\r\n\r\n        for (const key in formData) {\r\n            if (key === 'image' && formData[key]) {\r\n                formDataToSend.append('image', formData[key]);\r\n            } else if (formData[key] !== '') {\r\n                formDataToSend.append(key, formData[key]);\r\n            }\r\n        }\r\n\r\n        try {\r\n            const url = isEditing\r\n                ? `http://localhost:3000/api/customer/goats/${state.goat.id}`\r\n                : 'http://localhost:3000/api/customer/goats';\r\n            const method = isEditing ? 'PUT' : 'POST';\r\n\r\n            const res = await fetch(url, {\r\n                method,\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n                body: formDataToSend,\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            if (res.ok) {\r\n                Swal.fire({\r\n                    icon: 'success',\r\n                    title: isEditing ? 'Goat Updated' : 'Goat Registered',\r\n                    text: isEditing ? 'The goat listing has been updated.' : 'Your goat has been successfully listed for sale.',\r\n                    confirmButtonColor: '#3085d6',\r\n                }).then(() => navigate('/my-goats'));\r\n            } else {\r\n                setMessage(data.message || 'Failed to register goat. Ensure goat number is unique.');\r\n            }\r\n        } catch (err) {\r\n            setMessage('Network error: ' + err.message);\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"text-center p-10 text-gray-600\">Loading...</div>;\r\n\r\n    if (!verified) {\r\n        return <div className=\"text-center p-10 text-red-500\">{message}</div>;\r\n    }\r\n\r\n    if (!canSell) {\r\n        return <div className=\"text-center p-10 text-yellow-500\">{message}</div>;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"min-h-screen bg-cover bg-center p-6 font-sans\"\r\n            style={{\r\n                backgroundImage: `url('/images/index.jpg')`,\r\n            }}\r\n        >\r\n            <div className=\"max-w-3xl mx-auto bg-white bg-opacity-95 rounded-xl shadow-lg p-6 backdrop-blur-md\">\r\n                <h2 className=\"text-3xl font-bold text-center text-gray-800 mb-6 drop-shadow-md\">\r\n                    {isEditing ? 'Edit Goat Listing' : 'Register a Goat for Sale'}\r\n                </h2>\r\n                <form onSubmit={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-2 gap-4\" noValidate>\r\n                    <div>\r\n                        <label htmlFor=\"goat_number\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Goat Number\r\n                        </label>\r\n                        <input\r\n                            id=\"goat_number\"\r\n                            name=\"goat_number\"\r\n                            type=\"text\"\r\n                            value={formData.goat_number}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Unique goat identifier\"\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"breed\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Breed\r\n                        </label>\r\n                        <input\r\n                            id=\"breed\"\r\n                            name=\"breed\"\r\n                            type=\"text\"\r\n                            value={formData.breed}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Goat breed\"\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"dob\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Date of Birth\r\n                        </label>\r\n                        <input\r\n                            id=\"dob\"\r\n                            name=\"dob\"\r\n                            type=\"date\"\r\n                            value={formData.dob}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"weight\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Weight (kg)\r\n                        </label>\r\n                        <input\r\n                            id=\"weight\"\r\n                            name=\"weight\"\r\n                            type=\"number\"\r\n                            step=\"0.1\"\r\n                            value={formData.weight}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Weight in kilograms\"\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"health_status\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Health Status\r\n                        </label>\r\n                        <input\r\n                            id=\"health_status\"\r\n                            name=\"health_status\"\r\n                            type=\"text\"\r\n                            value={formData.health_status}\r\n                            onChange={handleChange}\r\n                            placeholder=\"General health information\"\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"minimum_price\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Minimum Price\r\n                            <span className=\"ml-2 text-gray-500 text-xs\">\r\n                                (e.g., $50-$100, based on breed and weight)\r\n                            </span>\r\n                        </label>\r\n                        <input\r\n                            id=\"minimum_price\"\r\n                            name=\"minimum_price\"\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={formData.minimum_price}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Minimum bid or price\"\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"maximum_price\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Maximum Price\r\n                            <span className=\"ml-2 text-gray-500 text-xs\">\r\n                                (e.g., $150-$300, based on market value)\r\n                            </span>\r\n                        </label>\r\n                        <input\r\n                            id=\"maximum_price\"\r\n                            name=\"maximum_price\"\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={formData.maximum_price}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Maximum expected price\"\r\n                            required\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Fixed Price (Optional)\r\n                        </label>\r\n                        <input\r\n                            id=\"price\"\r\n                            name=\"price\"\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={formData.price}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Fixed sale price\"\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"flex items-center text-sm font-medium text-gray-700\">\r\n                            <input\r\n                                name=\"is_active\"\r\n                                type=\"checkbox\"\r\n                                checked={formData.is_active}\r\n                                onChange={handleChange}\r\n                                className=\"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                            />\r\n                            Active Listing\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"col-span-2\">\r\n                        <label htmlFor=\"image\" className=\"block text-sm font-medium text-gray-700\">\r\n                            Upload Goat Image\r\n                        </label>\r\n                        <input\r\n                            id=\"image\"\r\n                            name=\"image\"\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleChange}\r\n                            required={!isEditing}\r\n                            className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\r\n                        />\r\n                        {imagePreview && (\r\n                            <div className=\"mt-2\">\r\n                                <p className=\"text-sm text-gray-600\">Image Preview:</p>\r\n                                <img\r\n                                    src={imagePreview}\r\n                                    alt=\"Goat Preview\"\r\n                                    className=\"mt-2 max-w-full h-auto rounded-md shadow-md\"\r\n                                    style={{ maxHeight: '200px' }}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {message && (\r\n                        <p className=\"col-span-2 text-red-500 text-sm\" role=\"alert\" aria-live=\"assertive\">\r\n                            {message}\r\n                        </p>\r\n                    )}\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={submitting}\r\n                        className={`col-span-2 py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition ${submitting ? 'opacity-50 cursor-not-allowed' : ''\r\n                            }`}\r\n                    >\r\n                        {submitting ? 'Submitting...' : isEditing ? 'Update Goat' : 'Register Goat'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SellGoat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}